name: Notify Telemetry

on: [push, fork]

jobs:
  notify_telemetry:
    runs-on: ubuntu-latest
    steps:

    - name: Tell The League that the student has pushed code
      env:
        GITHUB_USERNAME: ${{ github.actor }}
        REPO_URL: ${{ github.repositoryUrl }}
        EVENT_TYPE: ${{ github.event_name }}
      run: |
        curl -X POST https://student-telem.do.jointheleague.org/github/activity \
        -H "Content-Type: application/json" \
        -d '{"username": "'"${GITHUB_USERNAME}"'", "repo_url": "'"${REPO_URL}"'", "event_type": "'"${EVENT_TYPE}"'"}'
